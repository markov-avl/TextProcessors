# Задание

Имеется многострочный файл - file1, в котором есть повторяющиеся строки (1000 строк). Необходимо выполнить следующую последовательность:
1. Выбрать из file1 40 последних строк и записать в file2. 
2. Записать первые 10 строк из file2 в file3.
3. Выбрать в file2 все строки которые содержат "коко", заменить строку "коко" на "куку" и дописать только первые три вхождения в file3.
4. Оставить только уникальные строки в file3 и получить количества каждой уникальной строки в виде: КОЛ-ВО СТРОКА.

# Выполнение задания

## Скрипты

Генератор тысячи строк (всего возможно 16 видов строк) `generator.sh`:

```bash
#!/bin/bash

file=./file1

if [ -e $file ]; then
	echo -n > $file
else
	touch $file
fi

for _ in {1..1000}; do
	line="*"
	for _ in {1..2}; do
		number=$(($RANDOM % 4))
		if (( $number == 0 )); then
			line="$lineкуку*"
		elif (( $number == 1 )); then
			line="$lineкоко*"
		elif (( $number == 2 )); then
            line="$lineкеке*"
		else
			line="$lineкики*"
		fi
	done
	echo $line >> $file
done
```

Скрипт для выполнения задания:
```bash
#!/bin/bash

# Инициализация
./generator.sh
touch file2 file3

# Выбрать из file1 40 последних строк и записать в file2
tail -n 40 file1 > file2

# Записать первые 10 строк из file2 в file3
head file2 > file3

# Выбрать в file2 все строки которые содержат "коко", заменить строку "коко" на "куку" и дописать только первые три вхождения в file3
sed 's/коко/куку/g' file2 | grep 'куку' | head -n 3 >> file3

# Оставить только уникальные строки в file3 и получить количества каждой уникальной строки в виде: КОЛ-ВО СТРОКА
sort file3 | uniq -u | tee file3 | while read line; do echo "$( grep -F "$line" file3 | wc -l ) $line"; done
```

## Вывод скрипта

Если `file1` будет тот, что и в репозитории (там же и промежуточные файлы `file2` и `file3`), то будет следующий вывод:
```bash
$:~/Projects/TextProcessors$ ./script.sh
1 *кеке*кеке*
1 *кики*куку*
1 *коко*кики*
1 *куку*кики*
```